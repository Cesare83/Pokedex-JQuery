var pokemonRepository=function(){var e,a=[],n="https://pokeapi.co/api/v2/pokemon/?limit=150",t=$("#dialog-container"),o=$("#details-menue");function d(a){var n=$("#dialog-text"),o=$("#"+a),d=$("#bulbasaur"),i=$("#charmander"),s=$("#squirtle");d.removeClass("bulbasaur-background"),i.removeClass("charmander-background"),s.removeClass("squirtle-background"),o.addClass(a+"-background"),n.hide(),n.html("you selected "+a),n.fadeIn(400);var r=$("#cancel-button"),l=$("#confirm-button");r.on("click",function(){var e,a;d.removeClass("bulbasaur-background"),i.removeClass("charmander-background"),s.removeClass("squirtle-background"),e=$("#dialog-buttons"),a=$("#dialog-text"),e.fadeOut(350),a.hide(),a.html("Choose your favourite pokemon:"),a.fadeIn(350)}),l.on("click",function(){!function(){var a=$("header"),n=$(".pokedex"),o=$("#title");switch(e){case 0:a.addClass("green-background"),n.addClass("green-borders"),o.html("Pokedex green");break;case 1:a.addClass("red-background"),n.addClass("red-borders"),o.html("Pokedex red");break;case 2:a.addClass("blue-background"),n.addClass("blue-borders"),o.html("Pokedex blue")}t.fadeOut()}()})}return{getAll:function(){return a},loadList:function(){return fetch(n).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){!function(e){a.push(e)}({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:function(e){var a=e.detailsUrl;return $.ajax(a).then(function(a){e.imageUrl=a.sprites.front_default,e.height=a.height,e.types=a.types.map(function(e){return e.type.name})}).catch(function(e){console.error(e)})},addListItem:function(e){var a=$("ul"),n=$('<li class="list-item"></li>'),t=$("<p>"+e.name+"</p>"),d=$('<button class="details-button">show details</button>');n.append(t),n.append(d),a.append(n),d.on("click",function(){var a;a=e,pokemonRepository.loadDetails(a).then(function(){console.log(a),o.empty();var e=$('<div class="details-wrapper"></div>'),n=$('<p class="name-p">'+a.name+"</p>"),t=$("<img src="+a.imageUrl+' class="details-image">'),d=$('<p class="details-p">height: '+a.height+"</p>"),i=$('<p class="details-p">type: '+a.types.join(", ")+"</p>"),s=$('<p class="name-p">Loading..</p>');n.hide(),t.hide(),d.hide(),i.hide(),s.hide(),e.append(s),e.append(n),e.append(t),e.append(i),e.append(d),o.append(e),s.fadeIn(500),s.fadeOut(500),n.delay(1e3).fadeIn(500),t.delay(1e3).fadeIn(500),d.delay(1e3).fadeIn(500),i.delay(1e3).fadeIn(500)})})},showDialog:function(){var a=$("#dialog-container"),n=$('<div class="dialog-wrapper"></div>'),t=$('<div class="centered-text"></div>'),o=$('<p class="dialog-p" id="dialog-text">Choose your favourite pokemon:</p>'),i=$('<div class="dialog-img-wrapper"></div>'),s=$("<div></div>"),r=$("<div></div>"),l=$("<div></div>"),p=$('<button type="button" id="bulbasaur-button"></button>'),u=$('<button type="button" id="charmander-button"></button>'),c=$('<button type="button" id="squirtle-button"></button>'),b=$('<img id="bulbasaur" class="dialog-img" src="http://www.pokemonget.eu/shop/155-large_default/bulbasaur-6-ivs-shiny.jpg" alt="bulbasaur">'),m=$('<img id="charmander" class="dialog-img" src="http://www.pokemonget.eu/shop/152-large_default/charmander-6-ivs-shiny.jpg" alt="charmander">'),h=$('<img id="squirtle" class="dialog-img" src="http://www.pokemonget.eu/shop/160-large_default/squirtle-6ivs-shiny.jpg" alt="squirtle">'),g=$('<div id="dialog-buttons"></div>'),f=$('<div class="confirm-cancel-buttons"></div>'),v=$('<div class="confirm-cancel-buttons"></div>'),k=$('<button type="button" id="cancel-button">cancel</button>'),y=$('<button type="button" id="confirm-button">confirm</button>');g.hide(),n.hide(),f.append(k),v.append(y),g.append(f),g.append(v),p.append(b),u.append(m),c.append(h),s.append(p),r.append(u),l.append(c),i.append(s),i.append(r),i.append(l),t.append(o),n.append(t),n.append(i),n.append(g),a.append(n),n.fadeIn(700),p.on("click",function(){e=0,d("bulbasaur"),g.fadeIn(700)}),u.on("click",function(){e=1,d("charmander"),g.fadeIn(700)}),c.on("click",function(){e=2,d("squirtle"),g.fadeIn(700)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),pokemonRepository.showDialog();
